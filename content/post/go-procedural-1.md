+++
date = "2015-10-14T01:43:27+09:00"
description = "とある記事を見てどうしてもやりたくなって"
title = "Goでダンジョン生成アルゴリズム1"

+++

[手続き型のダンジョン生成アルゴリズム | プログラミング | POSTD](http://postd.cc/procedural-dungeon-generation-algorithm/)

今朝見つけて。  
昨日行われた KUG2#1(第1回関西golang勉強会)でgo-glの話題が少しあって、僕も触ってみようかなーと思っていたタイミングだったのでGoでこのアルゴリズムを実装してみることにした。（勉強会の感想は後日また書く。）

簡単に説明すると、このエントリは表題通りダンジョンを自動生成するためのアルゴリズムを説明していて（言語はLua？かな？記事のタグがLuaだったので・・）  
その方法としては、

* まず決められた半径の円の中にランダムなサイズのボックスを生成
* 物理エンジンでそれらをソリッドボディ化し分離（ここが非常に興味深いアプローチ！）
* 任意のサイズ以上のボックスをメインの部屋と決める
* blah blah blah... <br /><br />

とまぁ今の時点で部屋を分離までしか出来てないので説明はこの辺で。興味のある人は元記事を見てみるといいと思う。  
で、3時間程色々調べながら現在の進捗がコチラ。

<img src="/blog/images/go-procedural-1.gif" class="image" alt="sample">

70個のボックスを生成して物理エンジンで分離してる。
コードは[hatajoe/go-procedural-dungeon-generation](https://github.com/hatajoe/go-procedural-dungeon-generation)にあげてある。  
何も整えていないので見づらいと思うけど。 
物理エンジンは、chipmunk-physicsの[Go版](https://github.com/vova616/chipmunk)を使用した。  
物理エンジンを触ったことがある人はすんなり入れると思う。  
僕はそんなに触ったことはなかったけど、概念は大体知っていたので割りとすんなり実装出来た。

取り敢えず完成までは作ってみようと思います。
